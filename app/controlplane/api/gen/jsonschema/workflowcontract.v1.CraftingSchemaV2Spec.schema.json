{
  "$id": "workflowcontract.v1.CraftingSchemaV2Spec.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "additionalProperties": false,
  "patternProperties": {
    "^(envAllowList)$": {
      "description": "List of environment variables that are allowed to be present in the attestation",
      "items": {
        "type": "string"
      },
      "type": "array"
    },
    "^(policyGroups)$": {
      "description": "Policy groups to apply to this contract",
      "items": {
        "$ref": "workflowcontract.v1.PolicyGroupAttachment.schema.json"
      },
      "type": "array"
    }
  },
  "properties": {
    "annotations": {
      "description": "List of annotations that can be used to add metadata to the attestation\n this metadata can be used later on by the integrations engine to filter and interpolate data\n It works in addition to the annotations defined in the materials and the runner",
      "items": {
        "$ref": "workflowcontract.v1.Annotation.schema.json"
      },
      "type": "array"
    },
    "env_allow_list": {
      "description": "List of environment variables that are allowed to be present in the attestation",
      "items": {
        "type": "string"
      },
      "type": "array"
    },
    "materials": {
      "description": "Materials that are expected to be present in the attestation",
      "items": {
        "$ref": "workflowcontract.v1.CraftingSchema.Material.schema.json"
      },
      "type": "array"
    },
    "policies": {
      "$ref": "workflowcontract.v1.Policies.schema.json",
      "description": "Policies to apply to this contract"
    },
    "policy_groups": {
      "description": "Policy groups to apply to this contract",
      "items": {
        "$ref": "workflowcontract.v1.PolicyGroupAttachment.schema.json"
      },
      "type": "array"
    },
    "runner": {
      "$ref": "workflowcontract.v1.CraftingSchema.Runner.schema.json",
      "description": "Runner configuration for the contract"
    }
  },
  "title": "Crafting Schema V2 Spec",
  "type": "object"
}
