// Code generated by ent, DO NOT EDIT.

package ent

import (
	"context"
	"errors"
	"fmt"
	"time"

	"entgo.io/ent/dialect"
	"entgo.io/ent/dialect/sql"
	"entgo.io/ent/dialect/sql/sqlgraph"
	"entgo.io/ent/schema/field"
	"github.com/chainloop-dev/chainloop/app/controlplane/pkg/biz"
	"github.com/chainloop-dev/chainloop/app/controlplane/pkg/data/ent/attestation"
	"github.com/chainloop-dev/chainloop/app/controlplane/pkg/data/ent/casbackend"
	"github.com/chainloop-dev/chainloop/app/controlplane/pkg/data/ent/projectversion"
	"github.com/chainloop-dev/chainloop/app/controlplane/pkg/data/ent/workflow"
	"github.com/chainloop-dev/chainloop/app/controlplane/pkg/data/ent/workflowcontractversion"
	"github.com/chainloop-dev/chainloop/app/controlplane/pkg/data/ent/workflowrun"
	"github.com/google/uuid"
	"github.com/secure-systems-lab/go-securesystemslib/dsse"
)

// WorkflowRunCreate is the builder for creating a WorkflowRun entity.
type WorkflowRunCreate struct {
	config
	mutation *WorkflowRunMutation
	hooks    []Hook
	conflict []sql.ConflictOption
}

// SetCreatedAt sets the "created_at" field.
func (_c *WorkflowRunCreate) SetCreatedAt(v time.Time) *WorkflowRunCreate {
	_c.mutation.SetCreatedAt(v)
	return _c
}

// SetNillableCreatedAt sets the "created_at" field if the given value is not nil.
func (_c *WorkflowRunCreate) SetNillableCreatedAt(v *time.Time) *WorkflowRunCreate {
	if v != nil {
		_c.SetCreatedAt(*v)
	}
	return _c
}

// SetFinishedAt sets the "finished_at" field.
func (_c *WorkflowRunCreate) SetFinishedAt(v time.Time) *WorkflowRunCreate {
	_c.mutation.SetFinishedAt(v)
	return _c
}

// SetNillableFinishedAt sets the "finished_at" field if the given value is not nil.
func (_c *WorkflowRunCreate) SetNillableFinishedAt(v *time.Time) *WorkflowRunCreate {
	if v != nil {
		_c.SetFinishedAt(*v)
	}
	return _c
}

// SetState sets the "state" field.
func (_c *WorkflowRunCreate) SetState(v biz.WorkflowRunStatus) *WorkflowRunCreate {
	_c.mutation.SetState(v)
	return _c
}

// SetNillableState sets the "state" field if the given value is not nil.
func (_c *WorkflowRunCreate) SetNillableState(v *biz.WorkflowRunStatus) *WorkflowRunCreate {
	if v != nil {
		_c.SetState(*v)
	}
	return _c
}

// SetReason sets the "reason" field.
func (_c *WorkflowRunCreate) SetReason(v string) *WorkflowRunCreate {
	_c.mutation.SetReason(v)
	return _c
}

// SetNillableReason sets the "reason" field if the given value is not nil.
func (_c *WorkflowRunCreate) SetNillableReason(v *string) *WorkflowRunCreate {
	if v != nil {
		_c.SetReason(*v)
	}
	return _c
}

// SetRunURL sets the "run_url" field.
func (_c *WorkflowRunCreate) SetRunURL(v string) *WorkflowRunCreate {
	_c.mutation.SetRunURL(v)
	return _c
}

// SetNillableRunURL sets the "run_url" field if the given value is not nil.
func (_c *WorkflowRunCreate) SetNillableRunURL(v *string) *WorkflowRunCreate {
	if v != nil {
		_c.SetRunURL(*v)
	}
	return _c
}

// SetRunnerType sets the "runner_type" field.
func (_c *WorkflowRunCreate) SetRunnerType(v string) *WorkflowRunCreate {
	_c.mutation.SetRunnerType(v)
	return _c
}

// SetNillableRunnerType sets the "runner_type" field if the given value is not nil.
func (_c *WorkflowRunCreate) SetNillableRunnerType(v *string) *WorkflowRunCreate {
	if v != nil {
		_c.SetRunnerType(*v)
	}
	return _c
}

// SetAttestation sets the "attestation" field.
func (_c *WorkflowRunCreate) SetAttestation(v *dsse.Envelope) *WorkflowRunCreate {
	_c.mutation.SetAttestation(v)
	return _c
}

// SetAttestationDigest sets the "attestation_digest" field.
func (_c *WorkflowRunCreate) SetAttestationDigest(v string) *WorkflowRunCreate {
	_c.mutation.SetAttestationDigest(v)
	return _c
}

// SetNillableAttestationDigest sets the "attestation_digest" field if the given value is not nil.
func (_c *WorkflowRunCreate) SetNillableAttestationDigest(v *string) *WorkflowRunCreate {
	if v != nil {
		_c.SetAttestationDigest(*v)
	}
	return _c
}

// SetAttestationState sets the "attestation_state" field.
func (_c *WorkflowRunCreate) SetAttestationState(v []byte) *WorkflowRunCreate {
	_c.mutation.SetAttestationState(v)
	return _c
}

// SetContractRevisionUsed sets the "contract_revision_used" field.
func (_c *WorkflowRunCreate) SetContractRevisionUsed(v int) *WorkflowRunCreate {
	_c.mutation.SetContractRevisionUsed(v)
	return _c
}

// SetContractRevisionLatest sets the "contract_revision_latest" field.
func (_c *WorkflowRunCreate) SetContractRevisionLatest(v int) *WorkflowRunCreate {
	_c.mutation.SetContractRevisionLatest(v)
	return _c
}

// SetVersionID sets the "version_id" field.
func (_c *WorkflowRunCreate) SetVersionID(v uuid.UUID) *WorkflowRunCreate {
	_c.mutation.SetVersionID(v)
	return _c
}

// SetWorkflowID sets the "workflow_id" field.
func (_c *WorkflowRunCreate) SetWorkflowID(v uuid.UUID) *WorkflowRunCreate {
	_c.mutation.SetWorkflowID(v)
	return _c
}

// SetHasPolicyViolations sets the "has_policy_violations" field.
func (_c *WorkflowRunCreate) SetHasPolicyViolations(v bool) *WorkflowRunCreate {
	_c.mutation.SetHasPolicyViolations(v)
	return _c
}

// SetNillableHasPolicyViolations sets the "has_policy_violations" field if the given value is not nil.
func (_c *WorkflowRunCreate) SetNillableHasPolicyViolations(v *bool) *WorkflowRunCreate {
	if v != nil {
		_c.SetHasPolicyViolations(*v)
	}
	return _c
}

// SetID sets the "id" field.
func (_c *WorkflowRunCreate) SetID(v uuid.UUID) *WorkflowRunCreate {
	_c.mutation.SetID(v)
	return _c
}

// SetNillableID sets the "id" field if the given value is not nil.
func (_c *WorkflowRunCreate) SetNillableID(v *uuid.UUID) *WorkflowRunCreate {
	if v != nil {
		_c.SetID(*v)
	}
	return _c
}

// SetWorkflow sets the "workflow" edge to the Workflow entity.
func (_c *WorkflowRunCreate) SetWorkflow(v *Workflow) *WorkflowRunCreate {
	return _c.SetWorkflowID(v.ID)
}

// SetContractVersionID sets the "contract_version" edge to the WorkflowContractVersion entity by ID.
func (_c *WorkflowRunCreate) SetContractVersionID(id uuid.UUID) *WorkflowRunCreate {
	_c.mutation.SetContractVersionID(id)
	return _c
}

// SetNillableContractVersionID sets the "contract_version" edge to the WorkflowContractVersion entity by ID if the given value is not nil.
func (_c *WorkflowRunCreate) SetNillableContractVersionID(id *uuid.UUID) *WorkflowRunCreate {
	if id != nil {
		_c = _c.SetContractVersionID(*id)
	}
	return _c
}

// SetContractVersion sets the "contract_version" edge to the WorkflowContractVersion entity.
func (_c *WorkflowRunCreate) SetContractVersion(v *WorkflowContractVersion) *WorkflowRunCreate {
	return _c.SetContractVersionID(v.ID)
}

// AddCasBackendIDs adds the "cas_backends" edge to the CASBackend entity by IDs.
func (_c *WorkflowRunCreate) AddCasBackendIDs(ids ...uuid.UUID) *WorkflowRunCreate {
	_c.mutation.AddCasBackendIDs(ids...)
	return _c
}

// AddCasBackends adds the "cas_backends" edges to the CASBackend entity.
func (_c *WorkflowRunCreate) AddCasBackends(v ...*CASBackend) *WorkflowRunCreate {
	ids := make([]uuid.UUID, len(v))
	for i := range v {
		ids[i] = v[i].ID
	}
	return _c.AddCasBackendIDs(ids...)
}

// SetVersion sets the "version" edge to the ProjectVersion entity.
func (_c *WorkflowRunCreate) SetVersion(v *ProjectVersion) *WorkflowRunCreate {
	return _c.SetVersionID(v.ID)
}

// SetAttestationBundleID sets the "attestation_bundle" edge to the Attestation entity by ID.
func (_c *WorkflowRunCreate) SetAttestationBundleID(id uuid.UUID) *WorkflowRunCreate {
	_c.mutation.SetAttestationBundleID(id)
	return _c
}

// SetNillableAttestationBundleID sets the "attestation_bundle" edge to the Attestation entity by ID if the given value is not nil.
func (_c *WorkflowRunCreate) SetNillableAttestationBundleID(id *uuid.UUID) *WorkflowRunCreate {
	if id != nil {
		_c = _c.SetAttestationBundleID(*id)
	}
	return _c
}

// SetAttestationBundle sets the "attestation_bundle" edge to the Attestation entity.
func (_c *WorkflowRunCreate) SetAttestationBundle(v *Attestation) *WorkflowRunCreate {
	return _c.SetAttestationBundleID(v.ID)
}

// Mutation returns the WorkflowRunMutation object of the builder.
func (_c *WorkflowRunCreate) Mutation() *WorkflowRunMutation {
	return _c.mutation
}

// Save creates the WorkflowRun in the database.
func (_c *WorkflowRunCreate) Save(ctx context.Context) (*WorkflowRun, error) {
	_c.defaults()
	return withHooks(ctx, _c.sqlSave, _c.mutation, _c.hooks)
}

// SaveX calls Save and panics if Save returns an error.
func (_c *WorkflowRunCreate) SaveX(ctx context.Context) *WorkflowRun {
	v, err := _c.Save(ctx)
	if err != nil {
		panic(err)
	}
	return v
}

// Exec executes the query.
func (_c *WorkflowRunCreate) Exec(ctx context.Context) error {
	_, err := _c.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_c *WorkflowRunCreate) ExecX(ctx context.Context) {
	if err := _c.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (_c *WorkflowRunCreate) defaults() {
	if _, ok := _c.mutation.CreatedAt(); !ok {
		v := workflowrun.DefaultCreatedAt()
		_c.mutation.SetCreatedAt(v)
	}
	if _, ok := _c.mutation.State(); !ok {
		v := workflowrun.DefaultState
		_c.mutation.SetState(v)
	}
	if _, ok := _c.mutation.ID(); !ok {
		v := workflowrun.DefaultID()
		_c.mutation.SetID(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (_c *WorkflowRunCreate) check() error {
	if _, ok := _c.mutation.CreatedAt(); !ok {
		return &ValidationError{Name: "created_at", err: errors.New(`ent: missing required field "WorkflowRun.created_at"`)}
	}
	if _, ok := _c.mutation.State(); !ok {
		return &ValidationError{Name: "state", err: errors.New(`ent: missing required field "WorkflowRun.state"`)}
	}
	if v, ok := _c.mutation.State(); ok {
		if err := workflowrun.StateValidator(v); err != nil {
			return &ValidationError{Name: "state", err: fmt.Errorf(`ent: validator failed for field "WorkflowRun.state": %w`, err)}
		}
	}
	if _, ok := _c.mutation.ContractRevisionUsed(); !ok {
		return &ValidationError{Name: "contract_revision_used", err: errors.New(`ent: missing required field "WorkflowRun.contract_revision_used"`)}
	}
	if _, ok := _c.mutation.ContractRevisionLatest(); !ok {
		return &ValidationError{Name: "contract_revision_latest", err: errors.New(`ent: missing required field "WorkflowRun.contract_revision_latest"`)}
	}
	if _, ok := _c.mutation.VersionID(); !ok {
		return &ValidationError{Name: "version_id", err: errors.New(`ent: missing required field "WorkflowRun.version_id"`)}
	}
	if _, ok := _c.mutation.WorkflowID(); !ok {
		return &ValidationError{Name: "workflow_id", err: errors.New(`ent: missing required field "WorkflowRun.workflow_id"`)}
	}
	if len(_c.mutation.WorkflowIDs()) == 0 {
		return &ValidationError{Name: "workflow", err: errors.New(`ent: missing required edge "WorkflowRun.workflow"`)}
	}
	if len(_c.mutation.VersionIDs()) == 0 {
		return &ValidationError{Name: "version", err: errors.New(`ent: missing required edge "WorkflowRun.version"`)}
	}
	return nil
}

func (_c *WorkflowRunCreate) sqlSave(ctx context.Context) (*WorkflowRun, error) {
	if err := _c.check(); err != nil {
		return nil, err
	}
	_node, _spec := _c.createSpec()
	if err := sqlgraph.CreateNode(ctx, _c.driver, _spec); err != nil {
		if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return nil, err
	}
	if _spec.ID.Value != nil {
		if id, ok := _spec.ID.Value.(*uuid.UUID); ok {
			_node.ID = *id
		} else if err := _node.ID.Scan(_spec.ID.Value); err != nil {
			return nil, err
		}
	}
	_c.mutation.id = &_node.ID
	_c.mutation.done = true
	return _node, nil
}

func (_c *WorkflowRunCreate) createSpec() (*WorkflowRun, *sqlgraph.CreateSpec) {
	var (
		_node = &WorkflowRun{config: _c.config}
		_spec = sqlgraph.NewCreateSpec(workflowrun.Table, sqlgraph.NewFieldSpec(workflowrun.FieldID, field.TypeUUID))
	)
	_spec.OnConflict = _c.conflict
	if id, ok := _c.mutation.ID(); ok {
		_node.ID = id
		_spec.ID.Value = &id
	}
	if value, ok := _c.mutation.CreatedAt(); ok {
		_spec.SetField(workflowrun.FieldCreatedAt, field.TypeTime, value)
		_node.CreatedAt = value
	}
	if value, ok := _c.mutation.FinishedAt(); ok {
		_spec.SetField(workflowrun.FieldFinishedAt, field.TypeTime, value)
		_node.FinishedAt = value
	}
	if value, ok := _c.mutation.State(); ok {
		_spec.SetField(workflowrun.FieldState, field.TypeEnum, value)
		_node.State = value
	}
	if value, ok := _c.mutation.Reason(); ok {
		_spec.SetField(workflowrun.FieldReason, field.TypeString, value)
		_node.Reason = value
	}
	if value, ok := _c.mutation.RunURL(); ok {
		_spec.SetField(workflowrun.FieldRunURL, field.TypeString, value)
		_node.RunURL = value
	}
	if value, ok := _c.mutation.RunnerType(); ok {
		_spec.SetField(workflowrun.FieldRunnerType, field.TypeString, value)
		_node.RunnerType = value
	}
	if value, ok := _c.mutation.Attestation(); ok {
		_spec.SetField(workflowrun.FieldAttestation, field.TypeJSON, value)
		_node.Attestation = value
	}
	if value, ok := _c.mutation.AttestationDigest(); ok {
		_spec.SetField(workflowrun.FieldAttestationDigest, field.TypeString, value)
		_node.AttestationDigest = value
	}
	if value, ok := _c.mutation.AttestationState(); ok {
		_spec.SetField(workflowrun.FieldAttestationState, field.TypeBytes, value)
		_node.AttestationState = value
	}
	if value, ok := _c.mutation.ContractRevisionUsed(); ok {
		_spec.SetField(workflowrun.FieldContractRevisionUsed, field.TypeInt, value)
		_node.ContractRevisionUsed = value
	}
	if value, ok := _c.mutation.ContractRevisionLatest(); ok {
		_spec.SetField(workflowrun.FieldContractRevisionLatest, field.TypeInt, value)
		_node.ContractRevisionLatest = value
	}
	if value, ok := _c.mutation.HasPolicyViolations(); ok {
		_spec.SetField(workflowrun.FieldHasPolicyViolations, field.TypeBool, value)
		_node.HasPolicyViolations = &value
	}
	if nodes := _c.mutation.WorkflowIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   workflowrun.WorkflowTable,
			Columns: []string{workflowrun.WorkflowColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(workflow.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_node.WorkflowID = nodes[0]
		_spec.Edges = append(_spec.Edges, edge)
	}
	if nodes := _c.mutation.ContractVersionIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: false,
			Table:   workflowrun.ContractVersionTable,
			Columns: []string{workflowrun.ContractVersionColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(workflowcontractversion.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_node.workflow_run_contract_version = &nodes[0]
		_spec.Edges = append(_spec.Edges, edge)
	}
	if nodes := _c.mutation.CasBackendsIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2M,
			Inverse: false,
			Table:   workflowrun.CasBackendsTable,
			Columns: workflowrun.CasBackendsPrimaryKey,
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(casbackend.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges = append(_spec.Edges, edge)
	}
	if nodes := _c.mutation.VersionIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   workflowrun.VersionTable,
			Columns: []string{workflowrun.VersionColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(projectversion.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_node.VersionID = nodes[0]
		_spec.Edges = append(_spec.Edges, edge)
	}
	if nodes := _c.mutation.AttestationBundleIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2O,
			Inverse: false,
			Table:   workflowrun.AttestationBundleTable,
			Columns: []string{workflowrun.AttestationBundleColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(attestation.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges = append(_spec.Edges, edge)
	}
	return _node, _spec
}

// OnConflict allows configuring the `ON CONFLICT` / `ON DUPLICATE KEY` clause
// of the `INSERT` statement. For example:
//
//	client.WorkflowRun.Create().
//		SetCreatedAt(v).
//		OnConflict(
//			// Update the row with the new values
//			// the was proposed for insertion.
//			sql.ResolveWithNewValues(),
//		).
//		// Override some of the fields with custom
//		// update values.
//		Update(func(u *ent.WorkflowRunUpsert) {
//			SetCreatedAt(v+v).
//		}).
//		Exec(ctx)
func (_c *WorkflowRunCreate) OnConflict(opts ...sql.ConflictOption) *WorkflowRunUpsertOne {
	_c.conflict = opts
	return &WorkflowRunUpsertOne{
		create: _c,
	}
}

// OnConflictColumns calls `OnConflict` and configures the columns
// as conflict target. Using this option is equivalent to using:
//
//	client.WorkflowRun.Create().
//		OnConflict(sql.ConflictColumns(columns...)).
//		Exec(ctx)
func (_c *WorkflowRunCreate) OnConflictColumns(columns ...string) *WorkflowRunUpsertOne {
	_c.conflict = append(_c.conflict, sql.ConflictColumns(columns...))
	return &WorkflowRunUpsertOne{
		create: _c,
	}
}

type (
	// WorkflowRunUpsertOne is the builder for "upsert"-ing
	//  one WorkflowRun node.
	WorkflowRunUpsertOne struct {
		create *WorkflowRunCreate
	}

	// WorkflowRunUpsert is the "OnConflict" setter.
	WorkflowRunUpsert struct {
		*sql.UpdateSet
	}
)

// SetFinishedAt sets the "finished_at" field.
func (u *WorkflowRunUpsert) SetFinishedAt(v time.Time) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldFinishedAt, v)
	return u
}

// UpdateFinishedAt sets the "finished_at" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateFinishedAt() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldFinishedAt)
	return u
}

// ClearFinishedAt clears the value of the "finished_at" field.
func (u *WorkflowRunUpsert) ClearFinishedAt() *WorkflowRunUpsert {
	u.SetNull(workflowrun.FieldFinishedAt)
	return u
}

// SetState sets the "state" field.
func (u *WorkflowRunUpsert) SetState(v biz.WorkflowRunStatus) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldState, v)
	return u
}

// UpdateState sets the "state" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateState() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldState)
	return u
}

// SetReason sets the "reason" field.
func (u *WorkflowRunUpsert) SetReason(v string) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldReason, v)
	return u
}

// UpdateReason sets the "reason" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateReason() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldReason)
	return u
}

// ClearReason clears the value of the "reason" field.
func (u *WorkflowRunUpsert) ClearReason() *WorkflowRunUpsert {
	u.SetNull(workflowrun.FieldReason)
	return u
}

// SetRunURL sets the "run_url" field.
func (u *WorkflowRunUpsert) SetRunURL(v string) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldRunURL, v)
	return u
}

// UpdateRunURL sets the "run_url" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateRunURL() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldRunURL)
	return u
}

// ClearRunURL clears the value of the "run_url" field.
func (u *WorkflowRunUpsert) ClearRunURL() *WorkflowRunUpsert {
	u.SetNull(workflowrun.FieldRunURL)
	return u
}

// SetRunnerType sets the "runner_type" field.
func (u *WorkflowRunUpsert) SetRunnerType(v string) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldRunnerType, v)
	return u
}

// UpdateRunnerType sets the "runner_type" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateRunnerType() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldRunnerType)
	return u
}

// ClearRunnerType clears the value of the "runner_type" field.
func (u *WorkflowRunUpsert) ClearRunnerType() *WorkflowRunUpsert {
	u.SetNull(workflowrun.FieldRunnerType)
	return u
}

// SetAttestation sets the "attestation" field.
func (u *WorkflowRunUpsert) SetAttestation(v *dsse.Envelope) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldAttestation, v)
	return u
}

// UpdateAttestation sets the "attestation" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateAttestation() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldAttestation)
	return u
}

// ClearAttestation clears the value of the "attestation" field.
func (u *WorkflowRunUpsert) ClearAttestation() *WorkflowRunUpsert {
	u.SetNull(workflowrun.FieldAttestation)
	return u
}

// SetAttestationDigest sets the "attestation_digest" field.
func (u *WorkflowRunUpsert) SetAttestationDigest(v string) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldAttestationDigest, v)
	return u
}

// UpdateAttestationDigest sets the "attestation_digest" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateAttestationDigest() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldAttestationDigest)
	return u
}

// ClearAttestationDigest clears the value of the "attestation_digest" field.
func (u *WorkflowRunUpsert) ClearAttestationDigest() *WorkflowRunUpsert {
	u.SetNull(workflowrun.FieldAttestationDigest)
	return u
}

// SetAttestationState sets the "attestation_state" field.
func (u *WorkflowRunUpsert) SetAttestationState(v []byte) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldAttestationState, v)
	return u
}

// UpdateAttestationState sets the "attestation_state" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateAttestationState() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldAttestationState)
	return u
}

// ClearAttestationState clears the value of the "attestation_state" field.
func (u *WorkflowRunUpsert) ClearAttestationState() *WorkflowRunUpsert {
	u.SetNull(workflowrun.FieldAttestationState)
	return u
}

// SetContractRevisionUsed sets the "contract_revision_used" field.
func (u *WorkflowRunUpsert) SetContractRevisionUsed(v int) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldContractRevisionUsed, v)
	return u
}

// UpdateContractRevisionUsed sets the "contract_revision_used" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateContractRevisionUsed() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldContractRevisionUsed)
	return u
}

// AddContractRevisionUsed adds v to the "contract_revision_used" field.
func (u *WorkflowRunUpsert) AddContractRevisionUsed(v int) *WorkflowRunUpsert {
	u.Add(workflowrun.FieldContractRevisionUsed, v)
	return u
}

// SetContractRevisionLatest sets the "contract_revision_latest" field.
func (u *WorkflowRunUpsert) SetContractRevisionLatest(v int) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldContractRevisionLatest, v)
	return u
}

// UpdateContractRevisionLatest sets the "contract_revision_latest" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateContractRevisionLatest() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldContractRevisionLatest)
	return u
}

// AddContractRevisionLatest adds v to the "contract_revision_latest" field.
func (u *WorkflowRunUpsert) AddContractRevisionLatest(v int) *WorkflowRunUpsert {
	u.Add(workflowrun.FieldContractRevisionLatest, v)
	return u
}

// SetVersionID sets the "version_id" field.
func (u *WorkflowRunUpsert) SetVersionID(v uuid.UUID) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldVersionID, v)
	return u
}

// UpdateVersionID sets the "version_id" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateVersionID() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldVersionID)
	return u
}

// SetHasPolicyViolations sets the "has_policy_violations" field.
func (u *WorkflowRunUpsert) SetHasPolicyViolations(v bool) *WorkflowRunUpsert {
	u.Set(workflowrun.FieldHasPolicyViolations, v)
	return u
}

// UpdateHasPolicyViolations sets the "has_policy_violations" field to the value that was provided on create.
func (u *WorkflowRunUpsert) UpdateHasPolicyViolations() *WorkflowRunUpsert {
	u.SetExcluded(workflowrun.FieldHasPolicyViolations)
	return u
}

// ClearHasPolicyViolations clears the value of the "has_policy_violations" field.
func (u *WorkflowRunUpsert) ClearHasPolicyViolations() *WorkflowRunUpsert {
	u.SetNull(workflowrun.FieldHasPolicyViolations)
	return u
}

// UpdateNewValues updates the mutable fields using the new values that were set on create except the ID field.
// Using this option is equivalent to using:
//
//	client.WorkflowRun.Create().
//		OnConflict(
//			sql.ResolveWithNewValues(),
//			sql.ResolveWith(func(u *sql.UpdateSet) {
//				u.SetIgnore(workflowrun.FieldID)
//			}),
//		).
//		Exec(ctx)
func (u *WorkflowRunUpsertOne) UpdateNewValues() *WorkflowRunUpsertOne {
	u.create.conflict = append(u.create.conflict, sql.ResolveWithNewValues())
	u.create.conflict = append(u.create.conflict, sql.ResolveWith(func(s *sql.UpdateSet) {
		if _, exists := u.create.mutation.ID(); exists {
			s.SetIgnore(workflowrun.FieldID)
		}
		if _, exists := u.create.mutation.CreatedAt(); exists {
			s.SetIgnore(workflowrun.FieldCreatedAt)
		}
		if _, exists := u.create.mutation.WorkflowID(); exists {
			s.SetIgnore(workflowrun.FieldWorkflowID)
		}
	}))
	return u
}

// Ignore sets each column to itself in case of conflict.
// Using this option is equivalent to using:
//
//	client.WorkflowRun.Create().
//	    OnConflict(sql.ResolveWithIgnore()).
//	    Exec(ctx)
func (u *WorkflowRunUpsertOne) Ignore() *WorkflowRunUpsertOne {
	u.create.conflict = append(u.create.conflict, sql.ResolveWithIgnore())
	return u
}

// DoNothing configures the conflict_action to `DO NOTHING`.
// Supported only by SQLite and PostgreSQL.
func (u *WorkflowRunUpsertOne) DoNothing() *WorkflowRunUpsertOne {
	u.create.conflict = append(u.create.conflict, sql.DoNothing())
	return u
}

// Update allows overriding fields `UPDATE` values. See the WorkflowRunCreate.OnConflict
// documentation for more info.
func (u *WorkflowRunUpsertOne) Update(set func(*WorkflowRunUpsert)) *WorkflowRunUpsertOne {
	u.create.conflict = append(u.create.conflict, sql.ResolveWith(func(update *sql.UpdateSet) {
		set(&WorkflowRunUpsert{UpdateSet: update})
	}))
	return u
}

// SetFinishedAt sets the "finished_at" field.
func (u *WorkflowRunUpsertOne) SetFinishedAt(v time.Time) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetFinishedAt(v)
	})
}

// UpdateFinishedAt sets the "finished_at" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateFinishedAt() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateFinishedAt()
	})
}

// ClearFinishedAt clears the value of the "finished_at" field.
func (u *WorkflowRunUpsertOne) ClearFinishedAt() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearFinishedAt()
	})
}

// SetState sets the "state" field.
func (u *WorkflowRunUpsertOne) SetState(v biz.WorkflowRunStatus) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetState(v)
	})
}

// UpdateState sets the "state" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateState() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateState()
	})
}

// SetReason sets the "reason" field.
func (u *WorkflowRunUpsertOne) SetReason(v string) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetReason(v)
	})
}

// UpdateReason sets the "reason" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateReason() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateReason()
	})
}

// ClearReason clears the value of the "reason" field.
func (u *WorkflowRunUpsertOne) ClearReason() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearReason()
	})
}

// SetRunURL sets the "run_url" field.
func (u *WorkflowRunUpsertOne) SetRunURL(v string) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetRunURL(v)
	})
}

// UpdateRunURL sets the "run_url" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateRunURL() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateRunURL()
	})
}

// ClearRunURL clears the value of the "run_url" field.
func (u *WorkflowRunUpsertOne) ClearRunURL() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearRunURL()
	})
}

// SetRunnerType sets the "runner_type" field.
func (u *WorkflowRunUpsertOne) SetRunnerType(v string) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetRunnerType(v)
	})
}

// UpdateRunnerType sets the "runner_type" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateRunnerType() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateRunnerType()
	})
}

// ClearRunnerType clears the value of the "runner_type" field.
func (u *WorkflowRunUpsertOne) ClearRunnerType() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearRunnerType()
	})
}

// SetAttestation sets the "attestation" field.
func (u *WorkflowRunUpsertOne) SetAttestation(v *dsse.Envelope) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetAttestation(v)
	})
}

// UpdateAttestation sets the "attestation" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateAttestation() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateAttestation()
	})
}

// ClearAttestation clears the value of the "attestation" field.
func (u *WorkflowRunUpsertOne) ClearAttestation() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearAttestation()
	})
}

// SetAttestationDigest sets the "attestation_digest" field.
func (u *WorkflowRunUpsertOne) SetAttestationDigest(v string) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetAttestationDigest(v)
	})
}

// UpdateAttestationDigest sets the "attestation_digest" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateAttestationDigest() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateAttestationDigest()
	})
}

// ClearAttestationDigest clears the value of the "attestation_digest" field.
func (u *WorkflowRunUpsertOne) ClearAttestationDigest() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearAttestationDigest()
	})
}

// SetAttestationState sets the "attestation_state" field.
func (u *WorkflowRunUpsertOne) SetAttestationState(v []byte) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetAttestationState(v)
	})
}

// UpdateAttestationState sets the "attestation_state" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateAttestationState() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateAttestationState()
	})
}

// ClearAttestationState clears the value of the "attestation_state" field.
func (u *WorkflowRunUpsertOne) ClearAttestationState() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearAttestationState()
	})
}

// SetContractRevisionUsed sets the "contract_revision_used" field.
func (u *WorkflowRunUpsertOne) SetContractRevisionUsed(v int) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetContractRevisionUsed(v)
	})
}

// AddContractRevisionUsed adds v to the "contract_revision_used" field.
func (u *WorkflowRunUpsertOne) AddContractRevisionUsed(v int) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.AddContractRevisionUsed(v)
	})
}

// UpdateContractRevisionUsed sets the "contract_revision_used" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateContractRevisionUsed() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateContractRevisionUsed()
	})
}

// SetContractRevisionLatest sets the "contract_revision_latest" field.
func (u *WorkflowRunUpsertOne) SetContractRevisionLatest(v int) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetContractRevisionLatest(v)
	})
}

// AddContractRevisionLatest adds v to the "contract_revision_latest" field.
func (u *WorkflowRunUpsertOne) AddContractRevisionLatest(v int) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.AddContractRevisionLatest(v)
	})
}

// UpdateContractRevisionLatest sets the "contract_revision_latest" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateContractRevisionLatest() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateContractRevisionLatest()
	})
}

// SetVersionID sets the "version_id" field.
func (u *WorkflowRunUpsertOne) SetVersionID(v uuid.UUID) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetVersionID(v)
	})
}

// UpdateVersionID sets the "version_id" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateVersionID() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateVersionID()
	})
}

// SetHasPolicyViolations sets the "has_policy_violations" field.
func (u *WorkflowRunUpsertOne) SetHasPolicyViolations(v bool) *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetHasPolicyViolations(v)
	})
}

// UpdateHasPolicyViolations sets the "has_policy_violations" field to the value that was provided on create.
func (u *WorkflowRunUpsertOne) UpdateHasPolicyViolations() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateHasPolicyViolations()
	})
}

// ClearHasPolicyViolations clears the value of the "has_policy_violations" field.
func (u *WorkflowRunUpsertOne) ClearHasPolicyViolations() *WorkflowRunUpsertOne {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearHasPolicyViolations()
	})
}

// Exec executes the query.
func (u *WorkflowRunUpsertOne) Exec(ctx context.Context) error {
	if len(u.create.conflict) == 0 {
		return errors.New("ent: missing options for WorkflowRunCreate.OnConflict")
	}
	return u.create.Exec(ctx)
}

// ExecX is like Exec, but panics if an error occurs.
func (u *WorkflowRunUpsertOne) ExecX(ctx context.Context) {
	if err := u.create.Exec(ctx); err != nil {
		panic(err)
	}
}

// Exec executes the UPSERT query and returns the inserted/updated ID.
func (u *WorkflowRunUpsertOne) ID(ctx context.Context) (id uuid.UUID, err error) {
	if u.create.driver.Dialect() == dialect.MySQL {
		// In case of "ON CONFLICT", there is no way to get back non-numeric ID
		// fields from the database since MySQL does not support the RETURNING clause.
		return id, errors.New("ent: WorkflowRunUpsertOne.ID is not supported by MySQL driver. Use WorkflowRunUpsertOne.Exec instead")
	}
	node, err := u.create.Save(ctx)
	if err != nil {
		return id, err
	}
	return node.ID, nil
}

// IDX is like ID, but panics if an error occurs.
func (u *WorkflowRunUpsertOne) IDX(ctx context.Context) uuid.UUID {
	id, err := u.ID(ctx)
	if err != nil {
		panic(err)
	}
	return id
}

// WorkflowRunCreateBulk is the builder for creating many WorkflowRun entities in bulk.
type WorkflowRunCreateBulk struct {
	config
	err      error
	builders []*WorkflowRunCreate
	conflict []sql.ConflictOption
}

// Save creates the WorkflowRun entities in the database.
func (_c *WorkflowRunCreateBulk) Save(ctx context.Context) ([]*WorkflowRun, error) {
	if _c.err != nil {
		return nil, _c.err
	}
	specs := make([]*sqlgraph.CreateSpec, len(_c.builders))
	nodes := make([]*WorkflowRun, len(_c.builders))
	mutators := make([]Mutator, len(_c.builders))
	for i := range _c.builders {
		func(i int, root context.Context) {
			builder := _c.builders[i]
			builder.defaults()
			var mut Mutator = MutateFunc(func(ctx context.Context, m Mutation) (Value, error) {
				mutation, ok := m.(*WorkflowRunMutation)
				if !ok {
					return nil, fmt.Errorf("unexpected mutation type %T", m)
				}
				if err := builder.check(); err != nil {
					return nil, err
				}
				builder.mutation = mutation
				var err error
				nodes[i], specs[i] = builder.createSpec()
				if i < len(mutators)-1 {
					_, err = mutators[i+1].Mutate(root, _c.builders[i+1].mutation)
				} else {
					spec := &sqlgraph.BatchCreateSpec{Nodes: specs}
					spec.OnConflict = _c.conflict
					// Invoke the actual operation on the latest mutation in the chain.
					if err = sqlgraph.BatchCreate(ctx, _c.driver, spec); err != nil {
						if sqlgraph.IsConstraintError(err) {
							err = &ConstraintError{msg: err.Error(), wrap: err}
						}
					}
				}
				if err != nil {
					return nil, err
				}
				mutation.id = &nodes[i].ID
				mutation.done = true
				return nodes[i], nil
			})
			for i := len(builder.hooks) - 1; i >= 0; i-- {
				mut = builder.hooks[i](mut)
			}
			mutators[i] = mut
		}(i, ctx)
	}
	if len(mutators) > 0 {
		if _, err := mutators[0].Mutate(ctx, _c.builders[0].mutation); err != nil {
			return nil, err
		}
	}
	return nodes, nil
}

// SaveX is like Save, but panics if an error occurs.
func (_c *WorkflowRunCreateBulk) SaveX(ctx context.Context) []*WorkflowRun {
	v, err := _c.Save(ctx)
	if err != nil {
		panic(err)
	}
	return v
}

// Exec executes the query.
func (_c *WorkflowRunCreateBulk) Exec(ctx context.Context) error {
	_, err := _c.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (_c *WorkflowRunCreateBulk) ExecX(ctx context.Context) {
	if err := _c.Exec(ctx); err != nil {
		panic(err)
	}
}

// OnConflict allows configuring the `ON CONFLICT` / `ON DUPLICATE KEY` clause
// of the `INSERT` statement. For example:
//
//	client.WorkflowRun.CreateBulk(builders...).
//		OnConflict(
//			// Update the row with the new values
//			// the was proposed for insertion.
//			sql.ResolveWithNewValues(),
//		).
//		// Override some of the fields with custom
//		// update values.
//		Update(func(u *ent.WorkflowRunUpsert) {
//			SetCreatedAt(v+v).
//		}).
//		Exec(ctx)
func (_c *WorkflowRunCreateBulk) OnConflict(opts ...sql.ConflictOption) *WorkflowRunUpsertBulk {
	_c.conflict = opts
	return &WorkflowRunUpsertBulk{
		create: _c,
	}
}

// OnConflictColumns calls `OnConflict` and configures the columns
// as conflict target. Using this option is equivalent to using:
//
//	client.WorkflowRun.Create().
//		OnConflict(sql.ConflictColumns(columns...)).
//		Exec(ctx)
func (_c *WorkflowRunCreateBulk) OnConflictColumns(columns ...string) *WorkflowRunUpsertBulk {
	_c.conflict = append(_c.conflict, sql.ConflictColumns(columns...))
	return &WorkflowRunUpsertBulk{
		create: _c,
	}
}

// WorkflowRunUpsertBulk is the builder for "upsert"-ing
// a bulk of WorkflowRun nodes.
type WorkflowRunUpsertBulk struct {
	create *WorkflowRunCreateBulk
}

// UpdateNewValues updates the mutable fields using the new values that
// were set on create. Using this option is equivalent to using:
//
//	client.WorkflowRun.Create().
//		OnConflict(
//			sql.ResolveWithNewValues(),
//			sql.ResolveWith(func(u *sql.UpdateSet) {
//				u.SetIgnore(workflowrun.FieldID)
//			}),
//		).
//		Exec(ctx)
func (u *WorkflowRunUpsertBulk) UpdateNewValues() *WorkflowRunUpsertBulk {
	u.create.conflict = append(u.create.conflict, sql.ResolveWithNewValues())
	u.create.conflict = append(u.create.conflict, sql.ResolveWith(func(s *sql.UpdateSet) {
		for _, b := range u.create.builders {
			if _, exists := b.mutation.ID(); exists {
				s.SetIgnore(workflowrun.FieldID)
			}
			if _, exists := b.mutation.CreatedAt(); exists {
				s.SetIgnore(workflowrun.FieldCreatedAt)
			}
			if _, exists := b.mutation.WorkflowID(); exists {
				s.SetIgnore(workflowrun.FieldWorkflowID)
			}
		}
	}))
	return u
}

// Ignore sets each column to itself in case of conflict.
// Using this option is equivalent to using:
//
//	client.WorkflowRun.Create().
//		OnConflict(sql.ResolveWithIgnore()).
//		Exec(ctx)
func (u *WorkflowRunUpsertBulk) Ignore() *WorkflowRunUpsertBulk {
	u.create.conflict = append(u.create.conflict, sql.ResolveWithIgnore())
	return u
}

// DoNothing configures the conflict_action to `DO NOTHING`.
// Supported only by SQLite and PostgreSQL.
func (u *WorkflowRunUpsertBulk) DoNothing() *WorkflowRunUpsertBulk {
	u.create.conflict = append(u.create.conflict, sql.DoNothing())
	return u
}

// Update allows overriding fields `UPDATE` values. See the WorkflowRunCreateBulk.OnConflict
// documentation for more info.
func (u *WorkflowRunUpsertBulk) Update(set func(*WorkflowRunUpsert)) *WorkflowRunUpsertBulk {
	u.create.conflict = append(u.create.conflict, sql.ResolveWith(func(update *sql.UpdateSet) {
		set(&WorkflowRunUpsert{UpdateSet: update})
	}))
	return u
}

// SetFinishedAt sets the "finished_at" field.
func (u *WorkflowRunUpsertBulk) SetFinishedAt(v time.Time) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetFinishedAt(v)
	})
}

// UpdateFinishedAt sets the "finished_at" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateFinishedAt() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateFinishedAt()
	})
}

// ClearFinishedAt clears the value of the "finished_at" field.
func (u *WorkflowRunUpsertBulk) ClearFinishedAt() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearFinishedAt()
	})
}

// SetState sets the "state" field.
func (u *WorkflowRunUpsertBulk) SetState(v biz.WorkflowRunStatus) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetState(v)
	})
}

// UpdateState sets the "state" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateState() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateState()
	})
}

// SetReason sets the "reason" field.
func (u *WorkflowRunUpsertBulk) SetReason(v string) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetReason(v)
	})
}

// UpdateReason sets the "reason" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateReason() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateReason()
	})
}

// ClearReason clears the value of the "reason" field.
func (u *WorkflowRunUpsertBulk) ClearReason() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearReason()
	})
}

// SetRunURL sets the "run_url" field.
func (u *WorkflowRunUpsertBulk) SetRunURL(v string) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetRunURL(v)
	})
}

// UpdateRunURL sets the "run_url" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateRunURL() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateRunURL()
	})
}

// ClearRunURL clears the value of the "run_url" field.
func (u *WorkflowRunUpsertBulk) ClearRunURL() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearRunURL()
	})
}

// SetRunnerType sets the "runner_type" field.
func (u *WorkflowRunUpsertBulk) SetRunnerType(v string) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetRunnerType(v)
	})
}

// UpdateRunnerType sets the "runner_type" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateRunnerType() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateRunnerType()
	})
}

// ClearRunnerType clears the value of the "runner_type" field.
func (u *WorkflowRunUpsertBulk) ClearRunnerType() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearRunnerType()
	})
}

// SetAttestation sets the "attestation" field.
func (u *WorkflowRunUpsertBulk) SetAttestation(v *dsse.Envelope) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetAttestation(v)
	})
}

// UpdateAttestation sets the "attestation" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateAttestation() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateAttestation()
	})
}

// ClearAttestation clears the value of the "attestation" field.
func (u *WorkflowRunUpsertBulk) ClearAttestation() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearAttestation()
	})
}

// SetAttestationDigest sets the "attestation_digest" field.
func (u *WorkflowRunUpsertBulk) SetAttestationDigest(v string) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetAttestationDigest(v)
	})
}

// UpdateAttestationDigest sets the "attestation_digest" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateAttestationDigest() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateAttestationDigest()
	})
}

// ClearAttestationDigest clears the value of the "attestation_digest" field.
func (u *WorkflowRunUpsertBulk) ClearAttestationDigest() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearAttestationDigest()
	})
}

// SetAttestationState sets the "attestation_state" field.
func (u *WorkflowRunUpsertBulk) SetAttestationState(v []byte) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetAttestationState(v)
	})
}

// UpdateAttestationState sets the "attestation_state" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateAttestationState() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateAttestationState()
	})
}

// ClearAttestationState clears the value of the "attestation_state" field.
func (u *WorkflowRunUpsertBulk) ClearAttestationState() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearAttestationState()
	})
}

// SetContractRevisionUsed sets the "contract_revision_used" field.
func (u *WorkflowRunUpsertBulk) SetContractRevisionUsed(v int) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetContractRevisionUsed(v)
	})
}

// AddContractRevisionUsed adds v to the "contract_revision_used" field.
func (u *WorkflowRunUpsertBulk) AddContractRevisionUsed(v int) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.AddContractRevisionUsed(v)
	})
}

// UpdateContractRevisionUsed sets the "contract_revision_used" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateContractRevisionUsed() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateContractRevisionUsed()
	})
}

// SetContractRevisionLatest sets the "contract_revision_latest" field.
func (u *WorkflowRunUpsertBulk) SetContractRevisionLatest(v int) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetContractRevisionLatest(v)
	})
}

// AddContractRevisionLatest adds v to the "contract_revision_latest" field.
func (u *WorkflowRunUpsertBulk) AddContractRevisionLatest(v int) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.AddContractRevisionLatest(v)
	})
}

// UpdateContractRevisionLatest sets the "contract_revision_latest" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateContractRevisionLatest() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateContractRevisionLatest()
	})
}

// SetVersionID sets the "version_id" field.
func (u *WorkflowRunUpsertBulk) SetVersionID(v uuid.UUID) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetVersionID(v)
	})
}

// UpdateVersionID sets the "version_id" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateVersionID() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateVersionID()
	})
}

// SetHasPolicyViolations sets the "has_policy_violations" field.
func (u *WorkflowRunUpsertBulk) SetHasPolicyViolations(v bool) *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.SetHasPolicyViolations(v)
	})
}

// UpdateHasPolicyViolations sets the "has_policy_violations" field to the value that was provided on create.
func (u *WorkflowRunUpsertBulk) UpdateHasPolicyViolations() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.UpdateHasPolicyViolations()
	})
}

// ClearHasPolicyViolations clears the value of the "has_policy_violations" field.
func (u *WorkflowRunUpsertBulk) ClearHasPolicyViolations() *WorkflowRunUpsertBulk {
	return u.Update(func(s *WorkflowRunUpsert) {
		s.ClearHasPolicyViolations()
	})
}

// Exec executes the query.
func (u *WorkflowRunUpsertBulk) Exec(ctx context.Context) error {
	if u.create.err != nil {
		return u.create.err
	}
	for i, b := range u.create.builders {
		if len(b.conflict) != 0 {
			return fmt.Errorf("ent: OnConflict was set for builder %d. Set it on the WorkflowRunCreateBulk instead", i)
		}
	}
	if len(u.create.conflict) == 0 {
		return errors.New("ent: missing options for WorkflowRunCreateBulk.OnConflict")
	}
	return u.create.Exec(ctx)
}

// ExecX is like Exec, but panics if an error occurs.
func (u *WorkflowRunUpsertBulk) ExecX(ctx context.Context) {
	if err := u.create.Exec(ctx); err != nil {
		panic(err)
	}
}
