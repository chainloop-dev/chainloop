# Files Modified During Chart Upgrades

This reference lists all files that may be modified during Helm chart dependency upgrades.

## Type 1: Specific Image Upgrade

### Chart Files
- `deployment/charts/<chart-name>/Chart.yaml` - appVersion only

### CI/CD Configuration
- `.github/workflows/build_external_container_images.yaml` - commit hash reference

**Total files**: 2 files

## Type 2: Chart Minor Version Upgrade

### Vendorized Chart Files
- `deployment/charts/<chart-name>/Chart.yaml` - Chart version and appVersion
- `deployment/charts/<chart-name>/values.yaml` - Default configuration and image references
- `deployment/charts/<chart-name>/Chart.lock` - Dependency lock file (regenerated)
- `deployment/charts/<chart-name>/templates/*` - All Helm template files
- `deployment/charts/<chart-name>/README.md` - Chart documentation
- Other chart files as needed

### Main Chart Files
- `deployment/chainloop/Chart.yaml` - Dependency version reference
- `deployment/chainloop/Chart.lock` - Main chart dependency lock (regenerated)

### CI/CD Configuration (if images changed)
- `.github/workflows/build_external_container_images.yaml` - Image build commit references

**Total files**: Variable (all vendorized chart files + 2-3 main files)

## Common Chart Names

- `postgresql` - PostgreSQL database
- `vault` - HashiCorp Vault for secrets

## File Locations Summary

```
deployment/
├── charts/
│   ├── postgresql/          # Vendorized PostgreSQL chart
│   │   ├── Chart.yaml       # Chart metadata
│   │   ├── Chart.lock       # Dependencies (regenerated)
│   │   ├── values.yaml      # Configuration
│   │   └── templates/       # Helm templates
│   └── vault/               # Vendorized Vault chart
│       ├── Chart.yaml
│       ├── Chart.lock
│       ├── values.yaml
│       └── templates/
└── chainloop/               # Main Chainloop chart
    ├── Chart.yaml           # Main chart with dependencies
    └── Chart.lock           # Main dependencies (regenerated)

.github/
└── workflows/
    └── build_external_container_images.yaml  # Image build config
```

## Key Points

- `.lock` files are always regenerated by `helm dependency build`
- Template files are completely replaced during vendorization
- Image registry paths should reference Chainloop registry, not `docker.io/bitnami`
- Build workflow only modified if container images change
